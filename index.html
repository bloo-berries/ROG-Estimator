<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Benign Gynecologic Growth Rate Estimator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="calculator-container">
        <h1>Benign Gynecologic Growth Rate Estimator</h1>
        <p class="subtitle">Evidence-based growth projections for gynecological conditions</p>
        
        <div class="growth-type-selector">
            <label style="font-size: 16px; margin-bottom: 15px; display: block;">Select Growth Type:</label>
            <div class="growth-type-card" data-type="endometrioma">
                <div class="growth-type-title">Endometrioma</div>
                <div class="growth-type-description">Ovarian endometriotic cysts, often called "chocolate cysts"</div>
            </div>
            <div class="growth-type-card" data-type="fibroid">
                <div class="growth-type-title">Uterine Fibroid</div>
                <div class="growth-type-description">Benign smooth muscle tumors of the uterus (leiomyomas)</div>
            </div>
            <div class="growth-type-card" data-type="simple-cyst">
                <div class="growth-type-title">Ovarian Simple Cyst</div>
                <div class="growth-type-description">Fluid-filled sacs with thin walls and no solid components</div>
            </div>
            <div class="growth-type-card" data-type="complex-cyst">
                <div class="growth-type-title">Ovarian Complex Cyst</div>
                <div class="growth-type-description">Cysts with septations, solid components, or dermoid features</div>
            </div>
            <div class="growth-type-card" data-type="adenomyosis">
                <div class="growth-type-title">Adenomyosis</div>
                <div class="growth-type-description">Endometrial tissue growing within the uterine muscle wall</div>
            </div>
        </div>

        <form id="calculatorForm" style="display: none;">
            <div id="commonInputs" class="input-section">
                <div class="form-group">
                    <label for="currentSize">Current Size (cm)</label>
                    <input type="number" id="currentSize" min="0.1" max="30" step="0.1" placeholder="Enter size in centimeters">
                </div>

                <div class="form-group">
                    <label for="age">Patient Age (years)</label>
                    <input type="number" id="age" min="15" max="90" required placeholder="e.g., 32">
                </div>

                <div class="form-group">
                    <label for="timeframe">Projection Timeframe</label>
                    <select id="timeframe" required>
                        <option value="3">3 months</option>
                        <option value="6">6 months</option>
                        <option value="12" selected>1 year</option>
                        <option value="24">2 years</option>
                        <option value="36">3 years</option>
                    </select>
                    <small style="color: #666; font-size: 12px; font-style: italic;">*Expected growth or regression in the selected timeframe</small>
                </div>

                <div class="form-group">
                    <label>Calculation Mode</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="modeDeterministic" name="calculationMode" value="deterministic" checked>
                            <label for="modeDeterministic">Best Estimate (same result each time)</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="modeProbabilistic" name="calculationMode" value="probabilistic">
                            <label for="modeProbabilistic">Range of Possibilities (varies each time)</label>
                        </div>
                    </div>
                    <small style="color: #666; font-size: 12px; font-style: italic;"><strong>Best Estimate</strong> gives you the most typical outcome based on research. <strong>Range of Possibilities</strong> shows how results can vary between people ‚Äî run it multiple times to see the range.</small>
                </div>
            </div>

            <!-- Dynamic inputs will be inserted here -->
            <div id="dynamic-inputs"></div>

            <div class="input-section">
                <div class="form-group">
                    <label>Currently Pregnant?</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="pregnantNo" name="pregnant" value="no" checked>
                            <label for="pregnantNo">No</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="pregnantYes" name="pregnant" value="yes">
                            <label for="pregnantYes">Yes</label>
                        </div>
                    </div>
                </div>
            </div>

            <div style="display: flex; gap: 15px; margin-top: 30px;">
                <button type="button" class="back-btn" onclick="backToSelection()">Back</button>
                <button type="submit" class="calculate-btn">Calculate Growth Projection</button>
            </div>
        </form>

        <div id="results" class="results">
            <h2>Growth Projection Results</h2>
            
            <div class="result-item primary-result">
                <div class="result-label">Projected Size</div>
                <div class="result-value" id="projectedSize"></div>
            </div>

            <div class="result-item primary-result">
                <div class="result-label">Behavior Pattern</div>
                <div class="result-value" id="behaviorPattern"></div>
            </div>

            <div class="result-item" id="confidenceIntervalDisplay">
                <div class="result-label">Possible Size Range</div>
                <div class="result-value" id="confidenceIntervalValue"></div>
                <div class="result-explanation" id="confidenceIntervalExplanation"></div>
            </div>

            <details class="additional-details">
                <summary>View Additional Details</summary>
                <div class="details-content">
                    <div class="result-item">
                        <div class="result-label">Growth Type</div>
                        <div class="result-value" id="growthTypeResult"></div>
                    </div>
                    
                    <div class="result-item">
                        <div class="result-label">Expected Size Change</div>
                        <div class="result-value" id="sizeChange"></div>
                    </div>

                    <div class="result-item">
                        <div class="result-label">Monthly Growth Rate</div>
                        <div class="result-value" id="monthlyRate"></div>
                    </div>
                </div>
            </details>

            <div class="result-item" id="resolutionChance" style="display: none;">
                <div class="result-label">Chance of Resolution</div>
                <div class="result-value" id="resolutionRate"></div>
            </div>

            <div class="result-item" id="romaScoreDisplay" style="display: none;">
                <div class="result-label">ROMA Score</div>
                <div class="result-value" id="romaScoreValue"></div>
            </div>

            <div class="result-item" id="rmiScoreDisplay" style="display: none;">
                <div class="result-label">Risk of Malignancy Index (RMI)</div>
                <div class="result-value" id="rmiScoreValue"></div>
            </div>

            <div class="result-item" id="figoClassDisplay" style="display: none;">
                <div class="result-label">FIGO Classification</div>
                <div class="result-value" id="figoClassValue"></div>
            </div>

            <div class="growth-visual">
                <div class="size-bar">
                    <div class="current-size" id="currentBar"></div>
                    <div class="projected-size" id="projectedBar"></div>
                </div>
                <div class="size-labels">
                    <span>Current Size</span>
                    <span>Projected Size</span>
                </div>
            </div>

            <div id="recommendations" class="result-item info">
                <div class="result-label">Clinical Recommendations</div>
                <div class="result-value" id="recommendText"></div>
            </div>

            <div id="warnings" class="result-item warning" style="display: none;">
                <div class="result-label">Important Considerations</div>
                <div class="result-value" id="warningText"></div>
            </div>

            <div id="referencesDisplay" class="result-item info">
                <div class="result-label">Evidence Sources</div>
                <div class="result-value" id="referencesText"></div>
            </div>

            <div class="export-buttons">
                <button type="button" class="export-btn" onclick="exportResults()">
                    <span>üìÑ</span> Export Report
                </button>
                <button type="button" class="export-btn print-btn" onclick="printResults()">
                    <span>üñ®Ô∏è</span> Print
                </button>
            </div>
        </div>

        <div class="disclaimer">
            <strong>Disclaimer:</strong> This calculator provides estimates based on published research averages. Individual results vary significantly. Always consult with your healthcare provider for personalized medical advice and treatment decisions. This tool is for educational purposes only and does not replace professional medical judgment.
            
            <details class="version-details">
                <summary>Version 8.0 ‚Äî View Research Details</summary>
                <div class="version-content">
                    <strong>NEW IN V8.0:</strong> Deterministic calculation mode for reproducible clinical estimates, ROMA Score Calculator (Risk of Ovarian Malignancy Algorithm), RMI (Risk of Malignancy Index) integration, FIGO/PALM-COEIN fibroid classification, IOTA Simple Rules assessment, prominent 95% confidence interval display, CA-125/HE4 tumor marker integration, AMH fertility marker support, enhanced export/print functionality, and comprehensive citation references with PubMed IDs.
                    
                    <strong>CORE FEATURES:</strong> Li et al. predictive model (82.5% accuracy, AUC 0.825), evidence-based growth patterns (47% decrease, 31% stable, 22% increase for endometriomas), precise treatment-specific rates (continuous OCP: 0.5 cm/year, cyclic OCP: 0.62 cm/year, untreated: 1 cm/year), recurrence risk stratification (odds ratio 3.245 for previous history), concurrent endometriosis assessment (DIE, adenomyosis, bilateral disease), age-specific algorithms (relative risk 0.764 per year), and validated clinical thresholds. Multi-time projections (3-36 months), O-RADS risk stratification, and enhanced laboratory integration (FSH, LH, LDL, total cholesterol).
                    
                    <strong>ADENOMYOSIS:</strong> Evidence-based progression rates (21.3% overall, 30.77% untreated, 18.34% treated), type-specific algorithms (diffuse vs focal), junctional zone thickness monitoring, and treatment response prediction.
                    
                    <strong>FIBROIDS:</strong> Comprehensive multiplicity assessment (60-80% have multiple nodules), evidence-based growth projections (9-89% over 18 months, 188% for small fibroids), post-surgical recurrence rates (41.6% at 3 years laparoscopic, 31-43% open), treatment-specific outcomes (UAE: 3.1% recurrence at 1 year, HIFU: 22.5% at 2 years), risk factor stratification.
                </div>
            </details>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html> 